<!DOCTYPE html PUBLIC "-//WAPFORUM//DTD XHTML Mobile 1.0//EN" "http://www.wapforum.org/DTD/xhtml-mobile10.dtd">
<html>
  <head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=yes">
  
  
  <title>  CodingCow </title>

 
  
    <link rel="icon" href="/images/favicon.png">
  


  <link rel="stylesheet" href="/nayo.min.css"> 
</head>  
  <body>   
    
      <header class="header">
	
  <nav class="header-nav">        
   
    <span class="iconfont icon-menu mobile-toggle"></span>   	

    <!-- <a class="header-logo" href="/"></a> -->

    <div class="header-menu">          
              
            

              <a class="header-menu-link" id="header-menu-home" href="/">首页</a>     

            
            
            

              <a class="header-menu-link" id="header-menu-archives" href="/archives">归档</a>     

            
            
            

              <a class="header-menu-link" id="header-menu-categories" href="/categories">分类</a>     

            
            
            

              <a class="header-menu-link" id="header-menu-tags" href="/tags">标签</a>     

            
            
            

              <a class="header-menu-link" id="header-menu-about" href="/about">关于</a>     

            
            
            

              <a class="iconfont icon-menu-search header-menu-link" id="header-menu-search"></a>

            
                
    </div>  
    
  </nav>
</header>   

      <div class="container">       
          
          
            <section class="main">  
          

          


<div class="profile sildeUpMin">

		
		<a href="/">
			<img class="avatar" src="/images/header.jpg">
		</a>
		
		<p class="author">Austin</p>
		
		<div class="social">
   		      		
		<a target="_blank" class="social-links" href="https://github.com/orchoe">		
			<i class="iconfont icon-Github"></i>
		</a>	
	    
    	</div>		
</div>

      	  	

  		
    	<article class="article">		
	   
	<div class="article-header">
	    
	     <a class="article-title" href="/2017/12/21/新建文件夹/JVM中的垃圾回收算法/">JVM中的垃圾回收算法</a>  
	       
		 

		<div class="article-meta">
		
		12月 21, 2017

		
			<span class="iconfont icon-star"></span>		 
			            
			<a class="article-tag" href="/tags/JVM/">JVM</a>           
			
		
		</div>

	</div>


	

    
	<div class="article-excerpt">	
		 
			<p>&nbsp; &nbsp; &nbsp; &nbsp;</p>

		  	  
	</div>

	<div class="article-bottom">
		<a class="article-readmore" href="/2017/12/21/新建文件夹/JVM中的垃圾回收算法/">阅读更多</a> 	</div>	
    
</article>     
     	
      	  	

  		
    	<article class="article">		
	   
	<div class="article-header">
	    
	     <a class="article-title" href="/2017/12/18/新建文件夹/MySQL中的几种引擎介绍/">MySQL中的几种引擎介绍</a>  
	       
		 

		<div class="article-meta">
		
		12月 18, 2017

		
			<span class="iconfont icon-star"></span>		 
			            
			<a class="article-tag" href="/tags/MySQL/">MySQL</a>           
			
		
		</div>

	</div>


	

    
	<div class="article-excerpt">	
		 
			<p>&nbsp; &nbsp; &nbsp; &nbsp;</p>

		  	  
	</div>

	<div class="article-bottom">
		<a class="article-readmore" href="/2017/12/18/新建文件夹/MySQL中的几种引擎介绍/">阅读更多</a> 	</div>	
    
</article>     
     	
      	  	

  		
    	<article class="article">		
	   
	<div class="article-header">
	    
	     <a class="article-title" href="/2017/10/21/新建文件夹/Shiro轻松入门/">数据库的事务隔离级别</a>  
	       
		 

		<div class="article-meta">
		
		10月 21, 2017

		
			<span class="iconfont icon-star"></span>		 
			            
			<a class="article-tag" href="/tags/Database/">Database</a>           
			
		
		</div>

	</div>


	

    
	<div class="article-excerpt">	
		 
			<p>&nbsp; &nbsp; &nbsp; &nbsp;</p>

		  	  
	</div>

	<div class="article-bottom">
		<a class="article-readmore" href="/2017/10/21/新建文件夹/Shiro轻松入门/">阅读更多</a> 	</div>	
    
</article>     
     	
      	  	

  		
    	<article class="article">		
	   
	<div class="article-header">
	    
	     <a class="article-title" href="/2017/10/21/新建文件夹/Dubbo原理分析/">数据库的事务隔离级别</a>  
	       
		 

		<div class="article-meta">
		
		10月 21, 2017

		
			<span class="iconfont icon-star"></span>		 
			            
			<a class="article-tag" href="/tags/Database/">Database</a>           
			
		
		</div>

	</div>


	

    
	<div class="article-excerpt">	
		 
			<p>&nbsp; &nbsp; &nbsp; &nbsp;</p>

		  	  
	</div>

	<div class="article-bottom">
		<a class="article-readmore" href="/2017/10/21/新建文件夹/Dubbo原理分析/">阅读更多</a> 	</div>	
    
</article>     
     	
      	  	

  		
    	<article class="article">		
	   
	<div class="article-header">
	    
	     <a class="article-title" href="/2017/10/21/新建文件夹/数据库的事务隔离级别/">数据库的事务隔离级别</a>  
	       
		 

		<div class="article-meta">
		
		10月 21, 2017

		
			<span class="iconfont icon-star"></span>		 
			            
			<a class="article-tag" href="/tags/Database/">Database</a>           
			
		
		</div>

	</div>


	

    
	<div class="article-excerpt">	
		 
			<p>&nbsp; &nbsp; &nbsp; &nbsp;数据库事务的ACID特性</p>
<ol>
<li>事务的四个特性<br>数据库事务（Transaction）是指作为单个逻辑工作单元执行的一系列操作，要么完全地执行，要么完全地不执行。一方面，当多个应用程序并发访问数据库时，事务可以在应用程序间提供一个隔离方法，防止互相干扰。另一方面，事务为数据库操作序列提供了一个从失败恢复正常的方法。</li>
</ol>
<p>事务具有四个特性：原子性（Atomicity）、一致性（Consistency）、隔离型（Isolation）、持久性（Durability），简称ACID。</p>
<p>1.1 原子性（Atomicity）<br>事务的原子性是指事务中的操作不可拆分，只允许全部执行或者全部不执行。</p>
<p>1.2 一致性（Consistency）<br>事务的一致性是指事务的执行不能破坏数据库的一致性，一致性也称为完整性。一个事务在执行后，数据库必须从一个一致性状态转变为另一个一致性状态。</p>
<p>1.3 隔离型（Isolation）<br>事务的隔离型是指并发的事务相互隔离，不能互相干扰。</p>
<p>1.4 持久性（Durability）<br>事务的持久性是指事务一旦提交，对数据的状态变更应该被永久保存。</p>
<p>数据库事务隔离级别<br>原文链接：数据库事务隔离级别<br>数据库事务的隔离级别有4个，由低到高依次为Read uncommitted 、Read committed 、Repeatable read 、Serializable ，这四个级别可以逐个解决脏读 、不可重复读 、幻读 这几类问题。</p>
<p>√: 可能出现    ×: 不会出现</p>
<pre><code>脏读    不可重复读    幻读
</code></pre><p>Read uncommitted    √    √    √<br>Read committed    ×    √    √<br>Repeatable read    ×    ×    √<br>Serializable    ×    ×    ×</p>
<p>注意：我们讨论隔离级别的场景，主要是在多个事务并发 的情况下，因此，接下来的讲解都围绕事务并发。</p>
<h3 id="Read-Uncommitted-读未提交"><a href="#Read-Uncommitted-读未提交" class="headerlink" title="Read Uncommitted 读未提交"></a>Read Uncommitted 读未提交</h3><p>公司发工资了，领导把5000元打到singo的账号上，但是该事务并未提交，而singo正好去查看账户，发现工资已经到账，是5000元整，非常高 兴。可是不幸的是，领导发现发给singo的工资金额不对，是2000元，于是迅速回滚了事务，修改金额后，将事务提交，最后singo实际的工资只有 2000元，singo空欢喜一场。</p>
<p>出现上述情况，即我们所说的脏读 ，两个并发的事务，“事务A：领导给singo发工资”、“事务B：singo查询工资账户”，事务B读取了事务A尚未提交的数据。</p>
<p>当隔离级别设置为Read uncommitted 时，就可能出现脏读，如何避免脏读，请看下一个隔离级别。</p>
<h3 id="Read-Committed-读提交"><a href="#Read-Committed-读提交" class="headerlink" title="Read Committed 读提交"></a>Read Committed 读提交</h3><p>singo拿着工资卡去消费，系统读取到卡里确实有2000元，而此时她的老婆也正好在网上转账，把singo工资卡的2000元转到另一账户，并在 singo之前提交了事务，当singo扣款时，系统检查到singo的工资卡已经没有钱，扣款失败，singo十分纳闷，明明卡里有钱，为 何……</p>
<p>出现上述情况，即我们所说的不可重复读 ，两个并发的事务，“事务A：singo消费”、“事务B：singo的老婆网上转账”，事务A事先读取了数据，事务B紧接了更新了数据，并提交了事务，而事务A再次读取该数据时，数据已经发生了改变。</p>
<p>当隔离级别设置为Read committed 时，避免了脏读，但是可能会造成不可重复读。</p>
<blockquote>
<p>大多数数据库的默认级别就是Read Committed，比如Sql Server , Oracle。</p>
</blockquote>
<h3 id="Repeatable-Read-重复读"><a href="#Repeatable-Read-重复读" class="headerlink" title="Repeatable Read 重复读"></a>Repeatable Read 重复读</h3><p>当隔离级别设置为Repeatable read 时，可以避免不可重复读。当singo拿着工资卡去消费时，一旦系统开始读取工资卡信息（即事务开始），singo的老婆就不可能对该记录进行修改，也就是singo的老婆不能在此时转账。</p>
<p>虽然Repeatable read避免了不可重复读，但还有可能出现幻读 。</p>
<p>singo的老婆工作在银行部门，她时常通过银行内部系统查看singo的信用卡消费记录。有一天，她正在查询到singo当月信用卡的总消费金额 （select sum(amount) from transaction where month = 本月）为80元，而singo此时正好在外面胡吃海塞后在收银台买单，消费1000元，即新增了一条1000元的消费记录（insert transaction … ），并提交了事务，随后singo的老婆将singo当月信用卡消费的明细打印到A4纸上，却发现消费总额为1080元，singo的老婆很诧异，以为出 现了幻觉，幻读就这样产生了。</p>
<blockquote>
<p>注：Mysql的默认隔离级别就是Repeatable Read。</p>
</blockquote>
<h3 id="Serializable-序列化"><a href="#Serializable-序列化" class="headerlink" title="Serializable 序列化"></a>Serializable 序列化</h3><p>Serializable 是最高的事务隔离级别，同时代价也花费最高，性能很低，一般很少使用，在该级别下，事务顺序执行，不仅可以避免脏读、不可重复读，还避免了幻像读。</p>
<p>设置事务级别：SET TRANSACTION ISOLATION LEVEL</p>
<p>开始事务：begin tran<br>mysql : begin;/begin work;/start transaction; </p>
<p>提交事务：COMMIT</p>
<p>回滚事务：ROLLBACK</p>
<p>创建事务保存点：SAVE TRANSACTION savepoint_name</p>
<p>回滚到事务点:ROLLBACK TRANSACTION savepoint_name</p>

		  	  
	</div>

	<div class="article-bottom">
		<a class="article-readmore" href="/2017/10/21/新建文件夹/数据库的事务隔离级别/">阅读更多</a> 	</div>	
    
</article>     
     	
      	  	

  		
    	<article class="article">		
	   
	<div class="article-header">
	    
	     <a class="article-title" href="/2017/10/06/悲观锁和乐观锁/">悲观锁和乐观锁</a>  
	       
		 

		<div class="article-meta">
		
		10月 06, 2017

		
			<span class="iconfont icon-star"></span>		 
			            
			<a class="article-tag" href="/tags/Database/">Database</a>           
			            
			<a class="article-tag" href="/tags/Lock/">Lock</a>           
			
		
		</div>

	</div>


	

    
	<div class="article-excerpt">	
		
			<h1 id=""><a href="#" class="headerlink" title="@_@"></a>@_@</h1><p>&nbsp; &nbsp; &nbsp; &nbsp;悲观锁还是乐观锁是人们定义的一种概念，可以认为是一种思想。其实不仅仅是关系型数据库系统中有乐观锁和悲观锁的概念，像memcached、hibernate、tair等都有类似的概念。<br>&nbsp; &nbsp; &nbsp; &nbsp;针对于不同的业务场景，应该选用不同的并发控制方式。所以，不要把乐观并发控制和悲观并发控制狭义的理解为DBMS中的概念，更不要把他们和数据中提供的锁机制（行锁、表锁、排他锁、共享锁）混为一谈。其实，在DBMS中，悲观锁正是利用数据库本身提供的锁机制来实现的。<br>&nbsp;&nbsp;&nbsp;&nbsp;下面具体介绍一下悲观锁和乐观锁。<br>
		  	  
	</p></div>

	<div class="article-bottom">
		<a class="article-readmore" href="/2017/10/06/悲观锁和乐观锁/">阅读更多</a> 	</div>	
    
</article>     
     	
      	  	

  		
    	<article class="article">		
	   
	<div class="article-header">
	    
	     <a class="article-title" href="/2017/10/05/数据库的锁机制/">数据库的锁机制</a>  
	       
		 

		<div class="article-meta">
		
		10月 05, 2017

		
			<span class="iconfont icon-star"></span>		 
			            
			<a class="article-tag" href="/tags/Database/">Database</a>           
			            
			<a class="article-tag" href="/tags/Lock/">Lock</a>           
			
		
		</div>

	</div>


	

    
	<div class="article-excerpt">	
		
			<h1 id=""><a href="#" class="headerlink" title="(=^_^=)"></a>(=^_^=)</h1><p>&nbsp; &nbsp; &nbsp; &nbsp;在计算机科学中，特别是程序设计、操作系统、多处理机和数据库等领域，并发控制（Concurrency Control）是确保及时纠正由并发操作导致的错误的一种机制。<br>&nbsp; &nbsp; &nbsp; &nbsp;数据库管理系统（DBMS）中的并发控制的任务是确保在多个事务同时存取数据库中同一数据时不破坏事务的隔离性和统一性以及数据库的统一性。下面举例说明并发操作带来的数据不一致性问题：<br>
		  	  
	</p></div>

	<div class="article-bottom">
		<a class="article-readmore" href="/2017/10/05/数据库的锁机制/">阅读更多</a> 	</div>	
    
</article>     
     	
  

 

  <nav class="paginator scrollIn">
   
      <a class="prev" href="/"> 
      <i class="iconfont icon-left"></i>
      上一页
      </a>
   


   <span class="page-number">
   Page 2.
   </span>

   
  </nav> 
  


          </section> 
      </div>            
    
    <a id="backTop">
      <span>
        <i class="iconfont icon-backtotop"></i>
      </span>
    </a> 

  
    

        
        <div class="search-container sildeUpMin">


            <div class="search-header">
            <input type="text" placeholder="输入你想搜索的" id="search-input" class="search-input">  
            <span class="search-cancel iconfont icon-cancel"></span>
          
            </div>
              
            <div id="search-result" class="search-result"></div>

        </div>
 

     <div class="mobile-menu">      

      
      <img class="mobile-menu-icon" src="/images/favicon.png">   
      

         
            

            <a class="mobile-menu-link" href="/">首页
            </a>
            
         
            

            <a class="mobile-menu-link" href="/archives">归档
            </a>
            
         
            

            <a class="mobile-menu-link" href="/categories">分类
            </a>
            
         
            

            <a class="mobile-menu-link" href="/tags">标签
            </a>
            
         
            

            <a class="mobile-menu-link" href="/about">关于
            </a>
            
         
                          

            <a class="mobile-menu-link mobile-menu-search" href="#">搜索 </a>                 
            
         
      
</div>        
    



     
    




<footer id="footer">	    

		
		<div class="footer-copyright">
		&copy;
				
		2017-
		
		2018		
	
		&nbsp;CodingCow
		<br>

		Powered By
		<a href="https://hexo.io/" target="_blank">Hexo</a>
		<p>Hosted by <a href="https://pages.coding.me" style="font-weight: bold">Coding Pages</a></p>
		</div>			
	 
</footer>   

  

    <script src="/nayo.bundle.js"></script>           
  </body>        
</html>